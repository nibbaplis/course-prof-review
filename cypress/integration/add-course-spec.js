require('dotenv/config')

describe('Add Update and Delete Course Admin', () => {

    it('Testing Course page', ()=>{
        cy.visit('http://localhost:3000/admin/courses/add')
        cy.contains('Add Course')
        cy.get('#name')
            .type('Cypress Automated Course', {force: true})
        cy.get('#desc')
            .type('This is an automated description generated in a Cypress script')
        cy.get('#tag')
            .type('TestTag1',{force: true})
        cy.get('#add-tag')
            .click()
        cy.get('#tag')
            .type('TestTag2',{force: true})
        cy.get('#add-tag')
            .click()
        cy.get('#tag')
            .type('TestTag3',{force: true})
        cy.get('#add-tag')
            .click()
        cy.get('#grading')
            .type("7",{force:true})   
        cy.get('#rating')
            .type("3.5") 
        cy.get('#add-btn')
            .click()
        cy.visit('http://localhost:3000/admin/courses')
        cy.contains('Cypress Automated Course')
        cy.get('#Cypress-update')
                .click()
        cy.get('#desc')
            .type('This description is now updated')
        cy.get('#update-btn')
            .click()
        cy.visit('http://localhost:3000/admin/courses')
        cy.contains('Cypress Automated Course')
        cy.get('#Cypress-delete')
            .click()
        cy.reload();
        cy.contains('Cypress Automated Course').should('not.exist')
    })
})